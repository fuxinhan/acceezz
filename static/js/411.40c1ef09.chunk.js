"use strict";(self.webpackChunkwebapp=self.webpackChunkwebapp||[]).push([[411],{9411:(e,s,r)=>{r.r(s),r.d(s,{default:()=>me});var a=r(9379),n=r(5043);const l="UserInfo_UserInfoPage__e810E",i="UserInfo_layout__zZ4UQ",t="UserInfo_sideMenu__a3RFU",c="UserInfo_menuItem__OYe7J",o="UserInfo_active__VyX9j",d="UserInfo_arrow__y3enO",m="UserInfo_content__rGOx-",h="UserInfo_section__4H76F",u="UserInfo_headerBar__femp9",x="UserInfo_title__iQeDo",v="UserInfo_sub__AnKl3",_="UserInfo_link__ga2a4",p="UserInfo_profileTop__48vwc",j="UserInfo_leftIntro__iCeAX",f="UserInfo_nameBlock__7EIAT",y="UserInfo_name__f0+if",N="UserInfo_location__wQ8XV",g="UserInfo_fieldList__EjPt4",A="UserInfo_fieldRow__KGF-3",w="UserInfo_fieldLabel__6Dvvb",I="UserInfo_fieldValue__EvUrJ",P="UserInfo_primaryBtn__lyv1k",b="UserInfo_card__aT8Tp",U="UserInfo_metaGrid__Fdt8f",M="UserInfo_metaLabel__RoiiM",C="UserInfo_metaValue__kFyBp",k="UserInfo_modalActions__y9IEl",S="UserInfo_avatarClickable__6v477",Y="UserInfo_avatarModal__ZVD2q",D="UserInfo_cropperBody__vSO+J",T="UserInfo_emptyUploader__IKNl4",E="UserInfo_cropBox__vJJzx",q="UserInfo_cropImage__8Z677",F="UserInfo_cropMask__vEYyq",X="UserInfo_controls__Me8N2",G="UserInfo_scaleRow__CqsM6",R="UserInfo_scaleLabel__U5cu9",L="UserInfo_scaleSlider__UjZ3b",O="UserInfo_actionRow__1yNl1",B="UserInfo_twoColumnRow__QlBeB";var W=r(4400),V=r(5964),z=r(5492),J=r(2703),H=r(3625),Z=r(5367),Q=r(5981),K=r(6603),$=r(983),ee=r(5558),se=r(2544),re=r(1902),ae=r(446),ne=r.n(ae),le=r(579);const ie="profile",te="password",ce="preferences",oe="membership";function de(){const e=function(){try{const e=localStorage.getItem("userInfo");return e?JSON.parse(e):null}catch(e){return null}}(),s=(null===e||void 0===e?void 0:e.user_info)||{};return{username:s.username||"Member",name:s.name||"Accezz",cover_display:s.cover_display||null,location:s.location||null,date_of_birth:s.date_of_birth||null,address:s.address||null,phone:s.phone||null,preferred_name:s.preferred_name||null,preferred_communication:s.preferred_communication||null,collecting_status:s.collecting_status||!1,hobbies:s.hobbies||null,favorite_artist:s.favorite_artist||null,coffee_order:s.coffee_order||null,dietary_restrictions:s.dietary_restrictions||null,goals:s.goals||null,art_interests:s.art_interests||null,medium_interests:s.medium_interests||null}}const me=()=>{var e,s,r,ae,me;const[he,ue]=(0,n.useState)(ie),[xe,ve]=(0,n.useState)(de()),[_e,pe]=(0,n.useState)(!1),[je,fe]=(0,n.useState)(!1),[ye,Ne]=(0,n.useState)(!1),[ge,Ae]=(0,n.useState)(null),[we,Ie]=(0,n.useState)(1),[Pe,be]=(0,n.useState)({x:0,y:0}),Ue=(0,n.useRef)({dragging:!1,startX:0,startY:0,originX:0,originY:0}),Me=(0,n.useRef)({startDistance:0,startScale:1}),Ce=(0,n.useRef)(null),ke=(0,n.useRef)(null),Se=(0,n.useRef)(null),Ye=()=>{se.A.get({url:"api_v1/user/-1/",actionType:(0,re.A)().GetUserInfo,Success:e=>{ve(s=>(0,a.A)((0,a.A)({},s),e))}})};(0,n.useEffect)(()=>{ve(de()),Ye()},[]);const De=()=>{localStorage.clear(),window.location.reload(!0)},Te=()=>{var e;null===(e=ke.current)||void 0===e||e.click()},Ee=(e,s)=>{Ue.current={dragging:!0,startX:e,startY:s,originX:Pe.x,originY:Pe.y}},qe=(e,s)=>{const r=Ue.current;if(!r.dragging)return;const a=e-r.startX,n=s-r.startY;be({x:r.originX+a,y:r.originY+n})},Fe=()=>{Ue.current.dragging=!1},Xe=(e,s,r)=>Math.max(s,Math.min(r,e)),Ge=(0,n.useMemo)(()=>(0,le.jsxs)("aside",{className:t,children:[(0,le.jsxs)("div",{className:he===ie?"".concat(c," ").concat(o):c,onClick:()=>ue(ie),children:[(0,le.jsx)("span",{children:"Profile"}),(0,le.jsx)("span",{className:d,children:"\u203a"})]}),(0,le.jsxs)("div",{className:he===te?"".concat(c," ").concat(o):c,onClick:()=>ue(te),children:[(0,le.jsx)("span",{children:"Change password"}),(0,le.jsx)("span",{className:d,children:"\u203a"})]}),(0,le.jsxs)("div",{className:he===ce?"".concat(c," ").concat(o):c,onClick:()=>ue(ce),children:[(0,le.jsx)("span",{children:"Preferences"}),(0,le.jsx)("span",{className:d,children:"\u203a"})]}),(0,le.jsxs)("div",{className:he===oe?"".concat(c," ").concat(o):c,onClick:()=>ue(oe),children:[(0,le.jsx)("span",{children:"Membership application"}),(0,le.jsx)("span",{className:d,children:"\u203a"})]}),(0,le.jsxs)("div",{className:c,onClick:De,children:[(0,le.jsx)("span",{children:"Sign out"}),(0,le.jsx)("span",{className:d,children:"\u203a"})]})]}),[he]),Re=/^\d+$/,Le=/^[a-zA-Z]+$/;return(0,le.jsx)("div",{className:l,children:(0,le.jsxs)("div",{className:i,children:[Ge,(0,le.jsxs)("main",{className:m,children:[he===ie&&(0,le.jsxs)("section",{className:h,children:[(0,le.jsxs)("header",{className:u,children:[(0,le.jsx)("h2",{className:x,children:"Profile"}),(0,le.jsxs)("p",{className:v,children:["Here, you can edit your phone number and information address. Others cannot see this information. If your repeated repair fails, please ",(0,le.jsx)("a",{className:_,href:"mailto:advisory@theaccezz.com",children:"Contact us"})]})]}),(0,le.jsx)("div",{className:p,children:(0,le.jsxs)("div",{className:j,children:[(0,le.jsx)("div",{className:S,onClick:()=>{Ne(!0)},title:"\u70b9\u51fb\u66f4\u6362\u5934\u50cf",children:(0,le.jsx)(V.A,{size:80,src:se.A.returnFileUrl(xe.cover_display),children:null===(e=xe.username)||void 0===e?void 0:e[0]})}),(0,le.jsxs)("div",{className:f,children:[(0,le.jsx)("div",{className:y,children:xe.username}),(0,le.jsxs)("div",{className:N,children:["Location: ",xe.location||"-"]})]})]})}),(0,le.jsxs)("div",{className:g,children:[(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Preferred name"}),(0,le.jsx)("div",{className:I,children:xe.preferred_name})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Birthday"}),(0,le.jsx)("div",{className:I,children:xe.date_of_birth||"-"})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Location"}),(0,le.jsx)("div",{className:I,children:xe.location||"-"})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Phone"}),(0,le.jsx)("div",{className:I,children:xe.phone||"-"})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Gender"}),(0,le.jsx)("div",{className:I,children:xe.gender||"-"})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Communication preference"}),(0,le.jsx)("div",{className:I,children:null===xe||void 0===xe||null===(s=xe.preferred_communication)||void 0===s?void 0:s.map(e=>e+",")})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Collecting status "}),(0,le.jsx)("div",{className:I,children:(null===xe||void 0===xe?void 0:xe.collecting_status)||"-"})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Goals "}),(0,le.jsx)("div",{className:I,children:null===xe||void 0===xe||null===(r=xe.goals)||void 0===r?void 0:r.map(e=>e+",")})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Art Interests "}),(0,le.jsx)("div",{className:I,children:null===xe||void 0===xe||null===(ae=xe.art_interests)||void 0===ae?void 0:ae.map(e=>e+",")})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Medium Interests"}),(0,le.jsx)("div",{className:I,children:null===xe||void 0===xe||null===(me=xe.medium_interests)||void 0===me?void 0:me.map(e=>e+",")})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:"Coffee order"}),(0,le.jsx)("div",{className:I,children:(null===xe||void 0===xe?void 0:xe.coffee_order)||"-"})]}),(0,le.jsxs)("div",{className:A,children:[(0,le.jsx)("div",{className:w,children:" Dietary restrictions"}),(0,le.jsx)("div",{className:I,children:(null===xe||void 0===xe?void 0:xe.dietary_restrictions)||"-"})]})]}),console.log(xe),(0,le.jsx)(z.Ay,{className:P,onClick:()=>pe(!0),children:"Personal center form"}),(0,le.jsx)(J.A,{title:"Edit profile",open:_e,onCancel:()=>pe(!1),footer:null,width:720,destroyOnClose:!0,children:(0,le.jsxs)(H.A,{layout:"vertical",initialValues:xe,onFinish:e=>{const s=(0,a.A)({},e);se.A.patch({url:"/api_v1/user/-1/",data:s,actionType:(0,re.A)().PatchUserInfo,Success:()=>{Ye(),ve(s=>(0,a.A)((0,a.A)({},s),e)),W.Ay.success("\u221a")}}),pe(!1)},children:[(0,le.jsxs)("div",{className:B,children:[(0,le.jsx)(H.A.Item,{label:"Preferred name",name:"preferred_name",rules:[{required:!0,message:"Please enter your Preferred name"}],children:(0,le.jsx)(Z.A,{placeholder:"preferred_name"})}),(0,le.jsx)(H.A.Item,{label:"Birthday",name:"date_of_birth",getValueProps:e=>({value:e?ne()(e):null}),normalize:e=>e?ne()(e).format("YYYY-MM-DD"):null,children:(0,le.jsx)(Q.A,{style:{width:"100%"}})})]}),(0,le.jsxs)("div",{className:B,children:[(0,le.jsx)(H.A.Item,{label:"Location",name:"location",rules:[{required:!0,message:"Please enter your Location"}],children:(0,le.jsx)(Z.A,{placeholder:"location"})}),(0,le.jsx)(H.A.Item,{label:"Phone",name:"phone",children:(0,le.jsx)(Z.A,{placeholder:"Phone"})})]}),(0,le.jsx)(H.A.Item,{label:"Gender",name:"gender",rules:[{required:!0,message:"Please select your  Gender"}],children:(0,le.jsxs)(K.Ay.Group,{children:[(0,le.jsx)(K.Ay,{value:"Female",children:" Female "}),(0,le.jsx)(K.Ay,{value:"Male",children:" Male "}),(0,le.jsx)(K.Ay,{value:"Other",children:" Other "})]})}),(0,le.jsx)(H.A.Item,{label:"Prefered communication",name:"preferred_communication",rules:[{required:!0,message:"Please enter your Prefered communication"}],children:(0,le.jsxs)($.A.Group,{children:[(0,le.jsx)($.A,{value:"Email",children:"Email"}),(0,le.jsx)($.A,{value:"Instagram DM",children:"Instagram DM"}),(0,le.jsx)($.A,{value:"WhatsApp",children:"WhatsApp"}),(0,le.jsx)($.A,{value:"Text",children:"Text"}),(0,le.jsx)($.A,{value:"Physical mail",children:"Physical mail"})]})}),(0,le.jsx)(H.A.Item,{label:"What is your current status in art collecting?",name:"collecting_status",rules:[{required:!0,message:"Please select your  status in art collecting"}],children:(0,le.jsxs)(K.Ay.Group,{children:[(0,le.jsx)(K.Ay,{value:"I have an extensive collection (30+ works)",children:" I have an extensive collection (30+ works) "}),(0,le.jsx)(K.Ay,{value:"I have been collecting for a few years (10+ works)",children:" I have been collecting for a few years (10+ works) "}),(0,le.jsx)(K.Ay,{value:"Just started (1-2 works)",children:" Just started (1-2 works) "}),(0,le.jsx)(K.Ay,{value:"Yet to start (0 works)",children:" Yet to start (0 works) "})]})}),(0,le.jsx)(H.A.Item,{label:"Goals",name:"goals",rules:[{required:!0,message:"Please enter your Prefered Goals"}],children:(0,le.jsx)($.A.Group,{children:["Collect or build an art collection","Learn more about art","Visit gallery and museum exhibitions","Attend parties and exhibit openings","Build connections in the art world","Meet new people","Other"].map((e,s)=>(0,le.jsx)($.A,{value:e,children:e}))})}),(0,le.jsx)(H.A.Item,{label:"Art interests",name:"art_interests",rules:[{required:!0,message:"Please enter your Prefered communication"}],children:(0,le.jsx)($.A.Group,{children:["Contemporary art","Modern art","Pre modern art","Other art periods "].map((e,s)=>(0,le.jsx)($.A,{value:e,children:e}))})}),(0,le.jsx)(H.A.Item,{label:"Medium interests",name:"medium_interests",rules:[{required:!0,message:"Please enter your Prefered communication"}],children:(0,le.jsx)($.A.Group,{children:["Painting or drawing","Print","Sculpture","Textile ","Film or video ","Performance art ","Digital art ","NFTs "].map((e,s)=>(0,le.jsx)($.A,{value:e,children:e}))})}),(0,le.jsx)(H.A.Item,{label:"Coffee order",name:"coffee_order",rules:[{required:!0,message:"Please enter your Coffee order"}],children:(0,le.jsx)(Z.A,{placeholder:"coffee_order"})}),(0,le.jsx)(H.A.Item,{label:"Dietary restrictions",name:"dietary_restrictions",rules:[{required:!0,message:"Please enter your Dietary restrictions"}],children:(0,le.jsx)(Z.A,{placeholder:"dietary_restrictions"})}),(0,le.jsxs)("div",{className:k,children:[(0,le.jsx)(z.Ay,{onClick:()=>pe(!1),children:"Cancel"}),(0,le.jsx)(z.Ay,{type:"primary",htmlType:"submit",children:"Save"})]})]})}),(0,le.jsxs)(J.A,{title:"Change avatar",open:ye,onCancel:()=>Ne(!1),footer:null,destroyOnClose:!0,className:Y,children:[(0,le.jsx)("input",{ref:ke,type:"file",accept:"image/*",style:{display:"none"},onChange:e=>{var s;const r=null===(s=e.target.files)||void 0===s?void 0:s[0];if(!r)return;const a=new FileReader;a.onload=()=>{Ae(a.result),Ie(1),be({x:0,y:0})},a.readAsDataURL(r),e.target.value=""}}),(0,le.jsx)("div",{className:D,children:ge?(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)("div",{className:E,ref:Se,onMouseDown:e=>{e.preventDefault(),Ee(e.clientX,e.clientY)},onMouseMove:e=>{qe(e.clientX,e.clientY)},onMouseUp:Fe,onMouseLeave:Fe,onTouchStart:e=>{const s=e.touches;if(1===s.length){const e=s[0];Ee(e.clientX,e.clientY)}else if(2===s.length){const e=s[0],r=s[1],a=Math.sqrt(Math.pow(r.clientX-e.clientX,2)+Math.pow(r.clientY-e.clientY,2));Me.current={startDistance:a,startScale:we}}},onTouchMove:e=>{const s=e.touches;if(1===s.length){const e=s[0];qe(e.clientX,e.clientY)}else if(2===s.length){const e=s[0],r=s[1],a=Math.sqrt(Math.pow(r.clientX-e.clientX,2)+Math.pow(r.clientY-e.clientY,2)),{startDistance:n,startScale:l}=Me.current;if(n>0){const e=Xe(l*(a/n),.5,4);if(Ie(e),Ce.current&&Se.current){const s=Se.current.clientWidth,r=Ce.current,a=r.naturalWidth,n=r.naturalHeight,l=Math.max(s/a,s/n)*e,i=a*l,t=n*l,c=Math.max(0,(i-s)/2),o=Math.max(0,(t-s)/2);be(e=>({x:Xe(e.x,-c,c),y:Xe(e.y,-o,o)}))}}}},onTouchEnd:Fe,onWheel:e=>{e.preventDefault();const s=e.deltaY>0?-.1:.1,r=Xe(we+s,.5,4);if(Ie(r),Ce.current&&Se.current){const e=Se.current.clientWidth,s=Ce.current,a=s.naturalWidth,n=s.naturalHeight,l=Math.max(e/a,e/n)*r,i=a*l,t=n*l,c=Math.max(0,(i-e)/2),o=Math.max(0,(t-e)/2);be(e=>({x:Xe(e.x,-c,c),y:Xe(e.y,-o,o)}))}},children:[(0,le.jsx)("img",{ref:Ce,src:ge,alt:"avatar",className:q,style:{transform:"translate(-50%, -50%) translate(".concat(Pe.x,"px, ").concat(Pe.y,"px) scale(").concat(we,")")},draggable:!1}),(0,le.jsx)("div",{className:F})]}),(0,le.jsxs)("div",{className:X,children:[(0,le.jsxs)("div",{className:G,children:[(0,le.jsx)("span",{className:R,children:"\u7f29\u653e"}),(0,le.jsx)(ee.A,{className:L,min:.1,max:4,step:.01,value:we,onChange:e=>{const s=Xe(e,.1,4);if(Ie(s),Ce.current&&Se.current){const e=Se.current.clientWidth,r=Ce.current,a=r.naturalWidth,n=r.naturalHeight,l=Math.max(e/a,e/n)*s,i=a*l,t=n*l,c=Math.max(0,(i-e)/2),o=Math.max(0,(t-e)/2);be(e=>({x:Xe(e.x,-c,c),y:Xe(e.y,-o,o)}))}}})]}),(0,le.jsxs)("div",{className:O,children:[(0,le.jsx)(z.Ay,{onClick:Te,children:"\u91cd\u65b0\u9009\u62e9"}),(0,le.jsx)(z.Ay,{type:"primary",onClick:()=>{const e=(()=>{const e=Ce.current,s=Se.current;if(!e||!s)return null;const r=s.clientWidth,a=document.createElement("canvas");a.width=r,a.height=r;const n=a.getContext("2d");if(!n)return null;const l=e.naturalWidth,i=e.naturalHeight,t=Math.max(r/l,r/i)*we,c=l*t,o=i*t,d=r/2+Pe.x-c/2,m=r/2+Pe.y-o/2;return n.clearRect(0,0,r,r),n.drawImage(e,d,m,c,o),a.toDataURL("image/png")})();if(!e)return void W.Ay.error("\u88c1\u526a\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5");const s=e.split(",")[1],r=atob(s),a=new Uint8Array(r.length);for(let i=0;i<r.length;i++)a[i]=r.charCodeAt(i);const n=new Blob([a],{type:"image/jpeg"}),l=new FormData;l.append("file",n,"avatar.jpg"),se.A.post({url:"api_v1/file_upload/",data:l,actionType:(0,re.A)().PostFiles,Success:e=>{const s=null===e||void 0===e?void 0:e.cloud_id;se.A.patch({url:"/api_v1/user/-1/",data:{cover:s},actionType:(0,re.A)().PatchUserInfo,Success:()=>{Ye()}})},Error:e=>{console.log(e)}}),Ne(!1)},children:"\u4fdd\u5b58\u5934\u50cf"})]})]})]}):(0,le.jsx)("div",{className:T,children:(0,le.jsx)(z.Ay,{type:"primary",onClick:Te,children:"\u9009\u62e9\u56fe\u7247"})})})]})]}),he===te&&(0,le.jsxs)("section",{className:h,children:[(0,le.jsx)("header",{className:u,children:(0,le.jsx)("h2",{className:x,children:"Change password"})}),(0,le.jsxs)(H.A,{layout:"vertical",className:b,onFinish:e=>{console.log("change_password",e),se.A.post({url:"programmer/set_password/",data:e,actionType:(0,re.A)().postPassword,Success:e=>{W.Ay.success("Password changed successfully, please log in again \u221a "),se.A.LogOut()},Error:()=>{W.Ay.error("X")}}),fe(!1)},children:[(0,le.jsx)(H.A.Item,{label:"Current password",name:"old_password",rules:[{required:!0,message:"Please enter the current password"}],children:(0,le.jsx)(Z.A.Password,{placeholder:"Current password"})}),(0,le.jsx)(H.A.Item,{label:"New password",name:"new_password",rules:[{required:!0,message:"Please enter a new password"},{min:8,message:"Password must be at least 8 characters"},{max:20,message:"Password cannot exceed 20 characters"},e=>{let{getFieldValue:s}=e;return{validator:(e,r)=>r&&s("old_password")===r?Promise.reject(new Error("New password cannot be the same as current password")):Promise.resolve()}},{validator:(e,s)=>s&&Re.test(s)?Promise.reject(new Error("Password cannot be all numbers")):Promise.resolve()},{validator:(e,s)=>s&&Le.test(s)?Promise.reject(new Error("Password cannot be all letters")):Promise.resolve()}],children:(0,le.jsx)(Z.A.Password,{placeholder:"New password"})}),(0,le.jsx)(H.A.Item,{label:"Confirm password",name:"confirmPassword",dependencies:["new_password"],rules:[{required:!0,message:"Please confirm the password"},e=>{let{getFieldValue:s}=e;return{validator:(e,r)=>r&&s("new_password")!==r?Promise.reject(new Error("The two passwords that you entered do not match!")):Promise.resolve()}}],children:(0,le.jsx)(Z.A.Password,{placeholder:"Confirm password"})}),(0,le.jsx)(z.Ay,{className:P,htmlType:"submit",children:"Update password"})]})]}),he===oe&&(0,le.jsxs)("section",{className:h,children:[(0,le.jsx)("header",{className:u,children:(0,le.jsx)("h2",{className:x,children:"Membership application"})}),(0,le.jsx)("div",{className:b,children:(0,le.jsxs)("div",{className:U,children:[(0,le.jsxs)("div",{children:[(0,le.jsx)("div",{className:M,children:"Tier"}),(0,le.jsx)("div",{className:C,children:(null===xe||void 0===xe?void 0:xe.tier)||"--"})]}),(0,le.jsxs)("div",{children:[(0,le.jsx)("div",{className:M,children:"Join date"}),(0,le.jsx)("div",{className:C,children:(null===xe||void 0===xe?void 0:xe.joining_date)||"--"})]}),(0,le.jsxs)("div",{children:[(0,le.jsx)("div",{className:M,children:"Expiry"}),(0,le.jsx)("div",{className:C,children:(null===xe||void 0===xe?void 0:xe.expiry)||"--"})]})]})})]}),he===ce&&(0,le.jsxs)("section",{className:h,children:[(0,le.jsxs)("header",{className:u,children:[(0,le.jsx)("h2",{className:x,children:"Preferences"}),(0,le.jsx)("p",{className:v,children:"You can set your basic preferences here."})]}),(0,le.jsx)("div",{className:b,children:"No preferences yet."})]})]})]})})}}}]);
//# sourceMappingURL=411.40c1ef09.chunk.js.map